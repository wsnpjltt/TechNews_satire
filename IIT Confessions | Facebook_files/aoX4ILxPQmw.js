/*1359522342,173217057*/

if (self.CavalryLogger) { CavalryLogger.start_js(["kuj4\/"]); }

__d("SubscribeButton",["event-extensions","Arbiter"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h={SUBSCRIBED:'FollowingUser',UNSUBSCRIBED:'UnfollowingUser',init:function(i,j,k,l,m){Event.listen(j,'click',function(){g.inform(h.SUBSCRIBED,{profile_id:l});});g.subscribe(h.SUBSCRIBED,function(n,o){if(l===o.profile_id){if(!m)k.suppressNextMouseEnter();i.swap();}});g.subscribe(h.UNSUBSCRIBED,function(n,o){if(l===o.profile_id){i.unswap();k.hideFlyout();g.inform('SubMenu/Reset');}});},initUnsubscribe:function(i,j){Event.listen(i,'click',function(){g.inform.bind(g,h.UNSUBSCRIBED,{profile_id:j}).defer();});}};e.exports=h;});
__d("legacy:SubscribeButton",["SubscribeButton"],function(a,b,c,d){a.SubscribeButton=b('SubscribeButton');},3);
__d("Tour",["Arbiter","LayerDestroyOnHide","LayerHideOnEscape","copyProperties","NavigationMessage"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('LayerDestroyOnHide'),i=b('LayerHideOnEscape'),j=b('copyProperties'),k=b('NavigationMessage');function l(){if(l._instance)l._instance.setTourComplete();l._instance=this;}j(l.prototype,{tourStarted:false,tourComplete:false,_navigationBeginToken:null,_pageLeaveToken:null,steps:{},openDialog:null,init:function(){this._pageLeaveToken=g.subscribe('onload/exit',this.handleLeavePage.bind(this));this._navigationBeginToken=g.subscribe(k.NAVIGATION_BEGIN,this.handleTransition.bind(this));this.steps={};return this;},registerStep:function(m,n){m.disableBehavior(h);m.disableBehavior(i);this.steps[n]=m;m.subscribe('show',function(){m.inform('tour-dialog-show',m);});if(!this.getTourStarted())this.setTourStart();},_unsubscribeSubscriptions:function(){this._navigationBeginToken.unsubscribe();this._pageLeaveToken.unsubscribe();},handleLeavePage:function(){this._unsubscribeSubscriptions();},handleTransition:function(){this._unsubscribeSubscriptions();},handleTourStart:function(){},handleTourStop:function(){},handleTourComplete:function(){},showStep:function(m){var n=this.steps[m];if(!(this.openDialog==n))this.hideOpenDialog();if(!n)return;this.openDialog=n;n.show();},hideOpenDialog:function(){if(this.openDialog){this.openDialog.hide();this.openDialog=null;}},getTourStarted:function(){return this.tourStarted;},setTourStart:function(){this.tourStarted=true;this.handleTourStart();},setTourStop:function(){this.tourStarted=false;this.hideOpenDialog();this.handleTourStop();},setTourComplete:function(){if(this.tourComplete)return;this.setTourStop();this.tourComplete=true;this.handleTourComplete();},hideStep:function(m){var n=this.steps[m];n&&n.hide();}});j(l,{getInstance:function(){return l._instance||(l._instance=new l());}});e.exports=l;});
__d("legacy:tour",["Tour"],function(a,b,c,d){a.Tour=b('Tour');},3);
var PageLikeButton=window.PageLikeButton||(function(){function a(c,d,e,f,g){Tour.getInstance().hideStep('low_page_likes');fbpage_set_fan_status(c,d,e,false,function(){PageLikeButton.informLikeSuccess(d);},f,{fan_origin:g});}function b(c,d,event){a(event.getTarget(),c,true,function(e){Arbiter.inform(PageLikeButton.UNLIKED,{profile_id:c});AsyncResponse.defaultErrorHandler(e);},d);PageLikeButton.informLike(c);}return {LIKED:'liked',UNLIKED:'unliked',LIKED_SUCCESS:'liked_success',init:function(c,d,e,f,g,h,i,j){Arbiter.subscribe(PageLikeButton.LIKED,function(k,l){if(f===l.profile_id){if(!i)e.suppressNextMouseEnter();c.swap();if(j===true)new AsyncRequest().setURI('/ajax/pages/suggestions_on_liking.php').setData({pageid:f}).send();}});Arbiter.subscribe(PageLikeButton.UNLIKED,function(k,l){if(f===l.profile_id){c.unswap();e.hideFlyout();}});if(h)Arbiter.subscribe(PageLikeButton.LIKED_SUCCESS,function(k,l){app_data=URI.getRequestURI().getQueryData().app_data;if(l.profile_id==f)new AsyncRequest().setURI('/ajax/pages/fetch_app_column.php').setData({profile_id:f,tab_key:h,app_data:app_data}).send();});Event.listen(d,'click',bind(this,b,f,g));},initCallout:function(c,d){callout=document.getElementById('pageActionLikeCalloutButton');Event.listen(callout,'click',bind(this,b,c,d));},initUnlike:function(c,d,e){Event.listen(c,'click',function(event){a(event.getTarget(),d,false,function(f){Arbiter.inform(PageLikeButton.LIKED,{profile_id:d});AsyncResponse.defaultErrorHandler(f);},e);PageLikeButton.informUnlike(d);});},informLike:function(c){var d={profile_id:c};Arbiter.inform(PageLikeButton.LIKED,d);Arbiter.inform(SubscribeButton.SUBSCRIBED,d);},informLikeSuccess:function(c){var d={profile_id:c};Arbiter.inform(PageLikeButton.LIKED_SUCCESS,d);},informUnlike:function(c){var d={profile_id:c};Arbiter.inform.bind(Arbiter,PageLikeButton.UNLIKED,d).defer();Arbiter.inform.bind(Arbiter,SubscribeButton.UNSUBSCRIBED,d).defer();}};})();
var PlaceActionLink={start_claim_link:function(a){var b=new AsyncRequest().setMethod('POST').setURI('/ajax/places/claim/start_claim.php').setData({id:a});new Dialog().setAsync(b).show();return false;},refer_claim_link:function(a){var b=new AsyncRequest().setMethod('POST').setURI('/ajax/places/claim/refer_claim.php').setData({id:a});new Dialog().setAsync(b).show();return false;}};
__d("SwapButton",["event-extensions","Arbiter","copyProperties","CSS","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('Parent');function k(l,m,n){this._swapperButton=l;this._swappeeButton=m;Event.listen(l,'click',this.swap.bind(this));if(n)Event.listen(m,'click',this.unswap.bind(this));g.subscribe('SwapButton/focusOnJoinButton',this.setFocusOnSwapper.bind(this),g.SUBSCRIBE_ALL);}h(k.prototype,{_swapperButton:null,_swappeeButton:null,swap:function(){i.hide(this._swapperButton);i.show(this._swappeeButton);this._swappeeButton.focus();},unswap:function(){i.show(this._swapperButton);i.hide(this._swappeeButton);this._swapperButton.focus();},toggle:function(){i.toggle(this._swapperButton);i.toggle(this._swappeeButton);},setFocusOnSwapper:function(){this._swapperButton.focus();}});e.exports=k;});
__d("HoverButton",["AsyncRequest","CSS","DOM","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('URI'),k=b('copyProperties');function l(m,n,o,p){this._button=m;this._flyout=n;this._flyoutAjaxify=p;this._flyoutContent=o;n.subscribe('show',this._onShow.bind(this));n.subscribe('hide',this._onHide.bind(this));}k(l.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null,showFlyoutBriefly:function(){this.showFlyout();this._flyout.hideFlyoutDelayed(5000);},showFlyout:function(){this._flyout.showFlyout(this._button,true);this._flyout.inform('show',this._button);},hideFlyout:function(){this._flyout.hideFlyout(true);this._flyout.inform('hide',this._button);},_onShow:function(m,n){h.addClass(n,'uiHoverButtonSelected');h.addClass(n,'selected');if(this._flyoutAjaxify){h.addClass(this._flyoutContent,'async_saving');new g().setURI(new j(this._flyoutAjaxify)).setHandler(function(o){h.removeClass(this._flyoutContent,'async_saving');i.setContent(this._flyoutContent,o.payload);}.bind(this)).send();this._flyoutAjaxify=null;}},_onHide:function(m,n){h.removeClass(n,'uiHoverButtonSelected');h.removeClass(n,'selected');},destroy:function(){this.hideFlyout();this._flyout.destroy();},suppressNextMouseEnter:function(){this._flyout.setActiveNode(this._button);}});e.exports=l;});
__d("HoverFlyout",["event-extensions","Arbiter","ArbiterMixin","Class","DataStore","Keys","LayerDestroyOnHide","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('Class'),j=b('DataStore'),k=b('Keys'),l=b('LayerDestroyOnHide'),m=b('copyProperties');function n(o,p,q,r){if(o){this._showDelay=q;this._hideDelay=r;this.init(o);if(p)this.initNode(p);}g.subscribe('SwapButton/focusOnJoinButton',this.hideFlyout.shield(this),g.SUBSCRIBE_ALL);}m(n.prototype,h,{init:function(o){this._flyout=o;this._showDelay=this._showDelay||0;this._hideDelay=this._hideDelay||100;this._showTimeout=null;this._hideTimeout=null;this._flyoutSubscriptions=[this._flyout.subscribe('mouseenter',this._onFlyoutMouseEnter.bind(this)),this._flyout.subscribe('mouseleave',this.hideFlyout.shield(this))];this._nodes=[];this._dataStoreUnique='HoverFlyout_'+Date.now()+'_listeners';return this;},initNode:function(o){if(this._nodes.contains(o))return this;this._nodes.push(o);j.set(o,this._dataStoreUnique,[Event.listen(o,'mouseenter',this._onNodeMouseEnter.bind(this,o)),Event.listen(o,'mouseleave',this.hideFlyout.shield(this)),Event.listen(o,'click',this._onNodeMouseEnter.bind(this,o)),Event.listen(o,'keydown',this._onNodeKeyEscape.bind(this))]);return this;},deactivateNode:function(o){var p=j.get(o,this._dataStoreUnique);if(p)while(p.length)p.pop().remove();this._nodes.remove(o);},setShowDelay:function(o){this._showDelay=o;return this;},setHideDelay:function(o){this._hideDelay=o;return this;},showFlyout:function(o,p){this.setActiveNode(o);if(p){this._flyout.setContext(o).show();this.inform('show',o);}else this._showTimeout=this.showFlyout.bind(this,o,true).defer(this._showDelay);return this;},hideFlyout:function(o){clearTimeout(this._showTimeout);if(o){this._flyout.hide();this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}else this._hideTimeout=this.hideFlyout.bind(this,true).defer(this._hideDelay);},hideFlyoutDelayed:function(o){clearTimeout(this._showTimeout);clearTimeout(this._hideTimeout);this._hideTimeout=this.hideFlyout.bind(this,true).defer(o);},getActiveNode:function(){return this._activeNode;},setActiveNode:function(o){clearTimeout(this._hideTimeout);if(this._activeNode&&this._activeNode!==o)this.hideFlyout(true);this._activeNode=o;return this;},clearNodes:function(){for(var o=this._nodes.length;o>0;o--)this.deactivateNode(this._nodes[o-1]);},destroy:function(){while(this._flyoutSubscriptions.length)this._flyout.unsubscribe(this._flyoutSubscriptions.pop());this.clearNodes();},_onNodeMouseEnter:function(o){if(this._activeNode===o){clearTimeout(this._hideTimeout);}else this.showFlyout(o);},_onFlyoutMouseEnter:function(){clearTimeout(this._hideTimeout);},_onNodeKeyEscape:function(event){if(Event.getKeyCode(event)===k.ESC){this._activeNode&&this.inform('hide',this._activeNode);this._activeNode=null;}}});e.exports=a.HoverFlyout||n;});
__d("PhotosUploadWaterfall",["AsyncSignal"],function(a,b,c,d,e,f){var g=b('AsyncSignal'),h={APP_FLASH:'flash_pro',APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_CANCELED:19,CANCEL:22,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,METHOD_DRAGDROP:'dragdrop',METHOD_FILE_SELECTOR:'file_selector',VAULTBOX:'vaultbox',GRID:'grid',sendSignal:function(i,j){new g('/ajax/photos/waterfall.php',{data:JSON.stringify(i)}).setHandler(j).send();}};e.exports=h;});
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f){var g=b('SubscriptionsHandler'),h=new g('webmessenger');e.exports=h;});
__d("VaultBoxURI",[],function(a,b,c,d,e,f){var g={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(h){var i=new RegExp("\/"+g.PHOTOS_SYNCED+"\/?$");return h.getPath().match(i)&&h.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(h){var i=new RegExp("\/"+g.PHOTOS_SYNCED+"\/?$");return h.getPath().match(i);}};e.exports=g;});
__d("WebMessengerMenuFolderControl",["WebMessengerAuxMenu","CSS","WebMessengerTemplates","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('WebMessengerAuxMenu'),h=b('CSS'),i=b('WebMessengerTemplates'),j=b('copyProperties'),k=b('cx'),l,m;function n(o,p,q){var r=!l||l!=p;l=p;this._template=i[':fb:web-messenger:master-view:tab-bar:menu-option'].build();this._template.setNodeContent('folderLabel',o);if(!m||r){m=new g(l,"-cx-PRIVATE-webMessengerTabBar__menu");h.show(l.parentNode);}this._menuItem=m.addOption(this._template.getRoot(),q);this._menuItem.getRoot();}j(n.prototype,{getCountBadge:function(){return this._template.getNode('count');},setSelected:function(o){h.conditionClass(l.parentNode,'selectedFolder',o);if(o){this._menuItem.select();}else this._menuItem.deselect();},destroy:function(){m&&m.destroy();}});e.exports=n;});
__d("PhotoTagStore",["AsyncRequest","copyProperties","isEmpty"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('copyProperties'),i=b('isEmpty');function j(){this._tagList={};this._textTagList={};this._originalTagList={};this._dirtyPhotosByUid={};j.instance=this;}j.instance=null;j.getInstance=function(){if(j.instance===null)new j();return j.instance;};h(j.prototype,{getPhotoTags:function(k){return this._tagList[k]||{};},clear:function(){this._tagList={};this._textTagList={};this._originalTagList={};this._dirtyPhotosByUid={};},revert:function(k){for(var l in this._tagList)if(!this._originalTagList[l][k]){delete this._tagList[l][k];}else this._tagList[l][k]=this._originalTagList[l][k];this._dirtyPhotosByUid={};},hasNewTags:function(){return !i(this._tagList)||!i(this._textTagList);},userHasDirtyTags:function(k){return !i(this._dirtyPhotosByUid[k]);},handleTagFetch:function(k){for(var l in k)this.loadTagInfo(l,k[l]);},saveAlbumTagsForUser:function(k,l){var m={},n=[],o=this._dirtyPhotosByUid[k]||{};for(var p in o){var q=this._tagList[p][k];if(q===undefined){n[n.length]=p;continue;}m[p]={x:q.x,y:q.y};}var r={subject:k,action:'save',save_tags:m,remove_from:n};new g().setURI('/ajax/photos/album/tags.php').setData(r).setHandler(function(s){l(s.payload);}).setAllowCrossPageTransition(true).send();delete this._dirtyPhotosByUid[k];},getTagsFromList:function(k){var l=[];for(var m in k)if(k.hasOwnProperty(m))for(var n in k[m])if(k[m].hasOwnProperty(n))l.push(k[m][n]);return l;},getAllTags:function(){var k=this.getTagsFromList(this._tagList),l=this.getTagsFromList(this._textTagList);return k.concat(l);},removeTag:function(k,l){var m=this._tagList[k],n=this._originalTagList[k]||{};if(n[l]){this._dirtyPhotosByUid[l]=this._dirtyPhotosByUid[l]||{};this._dirtyPhotosByUid[l][k]=true;}else delete this._dirtyPhotosByUid[l][k];for(var o in m)if(o==l){delete this._tagList[k][o];if(i(this._tagList[k]))delete this._tagList[k];}},removeTextTag:function(k,l){var m=this._textTagList[k];if(!i(m[l])){delete this._textTagList[k][l];if(i(this._textTagList[k]))delete this._textTagList[k];}},removeAllTagsFromPhoto:function(k){if(!i(this._tagList[k]))for(var l in this._tagList[k]){if(!this._tagList[k].hasOwnProperty(l))continue;this.removeTag(k,l);}if(!i(this._textTagList[k]))for(var m in this._textTagList[k]){if(!this._textTagList[k].hasOwnProperty(m))continue;this.removeTextTag(k,m);}},storeTag:function(k,l,m,n,o){this.storeTagWithOptions(k,l,m,n,{can_remove:o});},storeTagWithOptions:function(k,l,m,n,o){this._dirtyPhotosByUid[l]=this._dirtyPhotosByUid[l]||{};this._dirtyPhotosByUid[l][k]=true;var p={x:m,y:n};h(p,o);if(!l){this._textTagList[k]=this._textTagList[k]||{};this._textTagList[k][p.name]=p;}else{this._tagList[k]=this._tagList[k]||{};this._tagList[k][l]=p;}},loadTagInfo:function(k,l){this._tagList[k]={};this._originalTagList[k]={};for(var m=0;m<l.length;m++){var n=l[m];this._tagList[k][n.subject]=n;this._originalTagList[k][n.subject]=n;}}});e.exports=j;});
__d("FreeformTokenizerBehavior",["Input","Keys","event-extensions","function-extensions"],function(a,b,c,d,e,f){var g=b('Input'),h=b('Keys');b('event-extensions');b('function-extensions');function i(j,k){var l=k.tokenize_on_blur!==false,m=k.tokenize_on_paste!==false,n=k.matcher&&new RegExp(k.matcher,'i'),o=k.paste_split;function p(event){var q=g.getValue(j.getInput()).trim();if(o&&event&&event.type=='paste'){q=q.split(o);}else q=[q];var r=false;for(var s=0;s<q.length;s++){var t=q[s].trim();if(t&&(!n||n.test(t))){var u={uid:t,text:t,freeform:true};j.addToken(j.createToken(u));r=true;}}if(event&&r){j.getTypeahead().getCore().afterSelect();event.kill();}}j.subscribe('keydown',function(q,r){var event=r.event,s=Event.getKeyCode(event);if(s==h.COMMA||s==h.RETURN){var t=j.getTypeahead().getView();if(t.getSelection()){t.select();event.kill();}else p(event);}});j.subscribe('paste',function(q,r){if(m)p.bind(null,r.event).defer(20);});j.subscribe('blur',function(q,r){if(l)p();j.getTypeahead().getCore().reset();});}e.exports=i;});