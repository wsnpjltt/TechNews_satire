/*1359522342,173217837*/

if (self.CavalryLogger) { CavalryLogger.start_js(["T8gbI"]); }

function intl_set_xmode(a){(new AsyncRequest()).setURI('/ajax/intl/save_xmode.php').setData({xmode:a}).setHandler(function(){document.location.reload();}).send();}function intl_set_amode(a){(new AsyncRequest()).setURI('/ajax/intl/save_xmode.php').setData({amode:a,app:false}).setHandler(function(){document.location.reload();}).send();}function intl_set_locale(a,b,c,d){if(!c)var c=a.options[a.selectedIndex].value;intl_save_locale(c,true,null,b,d);}function intl_save_locale(a,b,c,d,e){new AsyncRequest().setURI('/ajax/intl/save_locale.php').setData({aloc:a,source:d,app_only:e}).setHandler(function(f){if(b){document.location.reload();}else goURI(c);}).send();}function intl_set_cookie_locale(a,b){setCookie('locale',a,7*24*3600000);goURI(b);}
__d("Recaptcha",["AsyncRequest","Bootloader","CSS","DOM","Env","ge","tx"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Env'),l=b('ge'),m=b('tx');a.recaptcha_log_action=function(q){new g().setURI('/ajax/captcha/recaptcha_log_actions.php').setData({action:q,ua:navigator.userAgent,location:window.location.href}).setMethod('GET').setReadOnly(true).send();};var n,o={tabindex:0,callback:null},p={widget:null,timer_id:-1,fail_timer_id:-1,type:'image',ajax_verify_cb:null,audio_only:false,$:function(q){if(typeof(q)=="string"){return document.getElementById(q);}else return q;},create:function(q,r,s){p.destroy();if(r)p.widget=p.$(r);p._init_options(s);p._call_challenge(q);},destroy:function(){var q=p.$('recaptcha_challenge_field');if(q)q.parentNode.removeChild(q);if(p.timer_id!=-1)clearInterval(p.timer_id);p.timer_id=-1;var r=p.$('recaptcha_image');if(r)r.innerHTML="";if(p.widget){p.widget.style.display="none";p.widget=null;}},focus_response_field:function(){var q=p.$,r=q('captcha_response');try{r.focus();}catch(s){}},get_challenge:function(){if(typeof(a.RecaptchaState)=="undefined")return null;return a.RecaptchaState.challenge;},get_response:function(){var q=p.$,r=q('captcha_response');if(!r)return null;return r.value;},ajax_verify:function(q){p.ajax_verify_cb=q;var r=p._get_api_server()+"/ajaxverify"+"?c="+encodeURIComponent(p.get_challenge())+"&response="+encodeURIComponent(p.get_response());p._add_script(r);},_ajax_verify_callback:function(q){p.ajax_verify_cb(q);},_get_api_server:function(){var q=window.location.protocol,r;if(typeof(a._RecaptchaOverrideApiServer)!="undefined"){r=a._RecaptchaOverrideApiServer;}else r="www.google.com";return q+"//"+r;},_call_challenge:function(q){if(!p.audio_only)p.fail_timer_id=setTimeout(p.fail_timer_id==-1?"recaptcha_log_action('timeout'); create_captcha();":"create_captcha();",15000);var r=p._get_api_server()+"/recaptcha/api/challenge?k="+q+"&ajax=1&xcachestop="+Math.random();if(l('extra_challenge_params')!=null)r+="&"+l('extra_challenge_params').value;p._add_script(r);},_add_script:function(q){h.requestResource('js',q);},_init_options:function(q){var r=o,s=q||{};for(var t in s)r[t]=s[t];n=r;},challenge_callback:function(){if(!p.audio_only){clearTimeout(p.fail_timer_id);p._reset_timer();}var q=p.widget;if(window.addEventListener)window.addEventListener('unload',function(t){p.destroy();},false);if(p._is_ie()&&window.attachEvent)window.attachEvent('onbeforeunload',function(){});if(navigator.userAgent.indexOf("KHTML")>0){var r=document.createElement('iframe');r.src="about:blank";r.style.height="0px";r.style.width="0px";r.style.visibility="hidden";r.style.border="none";var s=document.createTextNode("This frame prevents back/forward cache problems in Safari.");r.appendChild(s);document.body.appendChild(r);}p._finish_widget();if(p.audio_only)p.switch_type('audio');a.recaptcha_log_action('shown');},_finish_widget:function(){var q=p.$,r=a.RecaptchaState,s=n,t=document.createElement("input");t.type="password";t.setAttribute("autocomplete","off");t.style.display="none";t.name="recaptcha_challenge_field";t.id="recaptcha_challenge_field";q('captcha_response').parentNode.insertBefore(t,q('captcha_response'));q('captcha_response').setAttribute("autocomplete","off");q('recaptcha_image').style.width='300px';q('recaptcha_image').style.height='57px';p.should_focus=false;if(!p.audio_only){p._set_challenge(r.challenge,'image');}else p._set_challenge(r.challenge,'audio');if(s.tabindex)q('captcha_response').tabIndex=s.tabindex;if(p.widget)p.widget.style.display='';if(s.callback)s.callback();q('recaptcha_loading').style.display="none";},switch_type:function(q){var r=p;r.type=q;r.$('recaptcha_type').value=q;r.reload(r.type=='audio'?'a':'v');},reload:function(q){var r=p,s=r.$,t=a.RecaptchaState;if(typeof(q)=="undefined")q='r';var u=t.server+"reload?c="+t.challenge+"&k="+t.site+"&reason="+q+"&type="+r.type+"&lang="+k.recaptcha_lang;if(l('extra_challenge_params')!=null)u+="&"+l('extra_challenge_params').value;r.should_focus=q!='t';r._add_script(u);},finish_reload:function(q,r){a.RecaptchaState.is_incorrect=false;p._set_challenge(q,r);},_set_challenge:function(q,r){var s=p,t=a.RecaptchaState,u=s.$;t.challenge=q;s.type=r;u('recaptcha_challenge_field').value=t.challenge;u('recaptcha_challenge_field').defaultValue=t.challenge;u('recaptcha_image').innerHtml="";if(r=='audio'){u("recaptcha_image").innerHTML=p.getAudioCaptchaHtml();}else if(r=='image'){var v=t.server+'image?c='+t.challenge;u('recaptcha_image').innerHTML="<img style='display:block;' height='57' width='300' src='"+v+"'/>";}p._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",t.is_incorrect);p._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio",r=='audio');if(s.should_focus)s.focus_response_field();s._reset_timer();},_reset_timer:function(){var q=a.RecaptchaState;clearInterval(p.timer_id);p.timer_id=setInterval("Recaptcha.reload('t');",(q.timeout-60*5)*1000);},_clear_input:function(){var q=p.$('captcha_response');q.value="";},_displayerror:function(q){var r=p.$;j.empty('recaptcha_image');r('recaptcha_image').appendChild(document.createTextNode(q));},reloaderror:function(q){p._displayerror(q);},_is_ie:function(){return (navigator.userAgent.indexOf("MSIE")>0)&&!window.opera;},_css_toggle:function(q,r,s){var t=p.widget;if(!t)t=document.body;var u=t.className;u=u.replace(new RegExp("(^|\\s+)"+q+"(\\s+|$)"),' ');u=u.replace(new RegExp("(^|\\s+)"+r+"(\\s+|$)"),' ');u+=" "+(s?q:r);i.setClass(t,u);},playAgain:function(){var q=p.$;q("recaptcha_image").innerHTML=p.getAudioCaptchaHtml();},getAudioCaptchaHtml:function(){var q=p,r=a.RecaptchaState,s=p.$,t=r.server+"image?c="+r.challenge;if(t.indexOf("https://")==0)t="http://"+t.substring(8);var u=r.server+"/img/audiocaptcha.swf?v2",v;if(q._is_ie()){v='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+u+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>';}else v='<embed src="'+u+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://get.adobe.com/flashplayer" url="'+u+'"></embed> ';var w=(p.checkFlashVer()?'<br/><a class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+"Play Again"+'</a>':'')+'<br/><a class="recaptcha_audio_cant_hear_link" target="_blank" href="'+t+'">'+"Can't hear this"+'</a>';return v+w;},gethttpwavurl:function(){var q=a.RecaptchaState;if(p.type=='audio'){var r=q.server+"image?c="+q.challenge;if(r.indexOf("https://")==0)r="http://"+r.substring(8);return r;}return "";},checkFlashVer:function(){var q=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false,r=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false,s=(navigator.userAgent.indexOf("Opera")!=-1)?true:false,t=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var u=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",v=navigator.plugins["Shockwave Flash"+u].description,w=v.split(" "),x=w[2].split(".");t=x[0];}}else if(q&&r&&!s)try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),aa=z.GetVariable("$version");t=aa.split(" ")[1].split(",")[0];}catch(y){}return t>=9;},getlang:function(){return k.recaptcha_lang;},createCaptcha:function(q){var r={};if(k.recaptcha_focus_on_load)r.callback=p.focus_response_field;setTimeout(function(){p.create(q,"captcha",r);},0);},createAudioCaptcha:function(q){setTimeout(function(){p._init_options({});p.audio_only=true;p._call_challenge(q);},0);}};e.exports=p;});
__d("legacy:recaptcha",["Recaptcha"],function(a,b,c,d){var e=b('Recaptcha');a.create_captcha=e.createCaptcha;a.m_create_audio_captcha=e.createAudioCaptcha;a.Recaptcha=e;},3);
__d("legacy:fbdesktop-detect",["FBDesktopDetect"],function(a,b,c,d){a.FbDesktopDetect=b('FBDesktopDetect');},3);
function FormTypeABTester(a){var b=16,c=32,d=65,e=90,f=48,g=57,h=58,i=63,j=91,k=94,l=0,m=0,n=0,o=0,p=[],q=null,r=[],s=[],t=[],u=[];for(var v=0;v<10;v++){r.push(0);s.push(0);}for(var w=0;w<10;w++){s.push(0);t.push(0);u.push(0);}var x=function(aa){var ba=window.event?Date.now():aa.timeStamp,ca=window.event?window.event.keyCode:aa.which;ca%=128;if((ca>=d&&ca<=e)||ca==c){l++;}else if(ca>=f&&ca<=g){m++;}else if(ca>=h&&ca<=i||ca>=j&&ca<=k){n++;}else o++;p[ca]=ba;if(q){var da=ba-q;if(da>=0&&((ca>=d&&ca<=e)||ca==c))if(da<400){s[Math.floor(da/20)]++;}else if(da<1000){t[Math.floor((da-400)/60)]++;}else if(da<3000)u[Math.floor((da-1000)/200)]++;}q=ba;},y=function(aa){var ba=window.event?Date.now():aa.timeStamp,ca=window.event?window.event.keyCode:aa.which,da=ba-p[ca%128];if(da>=50&&da<250)r[Math.floor((da-50)/20)]++;},z=function(aa){var ba=Math.max.apply(Math,aa),ca=[];aa.forEach(function(da){ca.push(Math.floor(da*63/(ba||1)));});return ca;};this.getDataVect=function(){var aa=s.concat(t,u);return z(aa).concat(z(r),[l/2,m/2,n/2,o/2]);};this.getData=function(){return Base64.encodeNums(this.getDataVect());};Event.listen(a,{keyup:y.bind(this),keydown:x.bind(this)});}function startFormTypeABTester(a){a.ab_tester=new FormTypeABTester(document);}function setFormTypeABTest(a){a.ab_test_data.value=a.ab_tester.getData();return true;}
__d("LoginFormController",["event-extensions","ge","Button"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ge'),h=b('Button');f.init=function(i,j){Event.listen(i,'submit',function(){h.setEnabled(j,false);h.setEnabled.curry(j,true).defer(15000);});var k=g('lgnjs');if(k)k.value=parseInt((new Date()).getTime()/1000,10);};});
var RegistrationBootloader=(function(){return {init:function(a,b,c,d,e){this.confirmationNode=a;this.redirectConfirmation=b;this.regFormName=c;this.logFocusName=d;this.validationEndpoint=e;this.regForm=ge(c);if(this.regForm){this.regForm.onclick=this.bootload.bind(this);this.regForm.onkeypress=this.bootload.bind(this);}},bootload:function(a,b){if(this.regForm){this.regForm.onclick=null;this.regForm.onkeypress=null;}Bootloader.loadComponents(['registration'],function(){Registration.getInstance().init(this.confirmationNode,this.redirectConfirmation,this.regFormName,this.logFocusName,this.validationEndpoint);if(b)Registration.getInstance().validateForm();Registration.getInstance().logFormFocus();}.bind(this));},bootloadAndValidate:function(){this.bootload(null,true);}};})();
function useragentcm(){var a=false,b={ffid:(typeof(Env.ffid)=="undefined"?0:Env.ffid),ffid1:(typeof(Env.ffid1)=="undefined"?0:Env.ffid1),ffid2:(typeof(Env.ffid2)=="undefined"?0:Env.ffid2),ffid3:(typeof(Env.ffid3)=="undefined"?0:Env.ffid3),ffid4:(typeof(Env.ffid4)=="undefined"?0:Env.ffid4),ffver:(typeof(Env.ffver)=="undefined"?0:Env.ffver)};b.qp=document.location;var c=ge('login_form');if(c&&c.action)b.qm=c.action;var d='\146\141\143\145\142\157\157\153',e=new RegExp('(^|\\.)'+d+'\\.com$','i').test(document.location.hostname);if(!e){a=true;}else if(b.qm){var f=b.qm.split('?')[0].split('#')[0],g=65535;for(var h=0;h<f.length;h++){var i=((g>>8)^f.charCodeAt(h))&255;i^=i>>4;g=((g<<8)^(i<<12)^(i<<5)^i)&65535;}if(Env.ffver&&Env.ffver!=g)a=true;}if(a){var j=document.location.protocol+'//www.'+d+'.com/ajax/ua_callback.php';if(document.referrer)b.qr1=document.referrer;Bootloader.loadComponents('async-signal',function(){new AsyncSignal(j,b).send();});}}
__d("IndexLogoutSponsorship",["event-extensions","URI","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('URI'),h=b('ge'),i;function j(m){return setTimeout(function(){g('/index.php').addQueryData({l_s:'r'}).go();},m);}function k(m,n){var o=false,p=function(){if(o)return;clearTimeout(i);i=j(n);},q=function(){clearTimeout(i);o=true;};Event.listen(document,{mousedown:q,mouseup:q,click:q,keydown:q,mousemove:p});if(m!==null){Event.listen(m,'mouseover',function(){Event.listen(window,'blur',q);});var r=h('email');try{r.focus();}catch(s){}}}var l={init:function(m,n){i=j(n);k(m,n);}};e.exports=l;});