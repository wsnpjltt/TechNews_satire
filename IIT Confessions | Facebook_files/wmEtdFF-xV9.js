/*1359522342,173213983*/

if (self.CavalryLogger) { CavalryLogger.start_js(["EDZae"]); }

__d("BrokenProfilePicLogger",["Run","DOM","JSLogger"],function(a,b,c,d,e,f){var g=b("Run"),h=b("DOM"),i=b("JSLogger"),j=i.create("entities_profile_pics"),k={checkAndLog:function(l){g.onAfterLoad(function(){var m=h.find(l.parentNode,'img');if(!m.complete||(typeof m.naturalWidth!="undefined"&&m.naturalWidth===0))j.log('broken_link',{src:m.getAttribute('src')});});}};e.exports=k;});
__d("TimelineDrag",["event-extensions","ArbiterMixin","Class","Locale","Style","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ArbiterMixin'),h=b('Class'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('copyProperties');function m(n,o,p){p=p||{};this._listenOn=p.listenOn;this._offsetInput=o;this._defaultOffset=p.default_offset;this._killClicks=p.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(n,p);}l(m.prototype,g,{setPicture:function(n,o){if(!n)return false;o=o||{};this._picture=n;this._defaultOffset=o.default_offset;if(o.vertical!==undefined)this._vertical=o.vertical;if(this._vertical){if(o.height)this._containerHeight=o.height;this._offsetType='top';this._eventCoord='y';}else{if(o.width)this._containerWidth=o.width;this._RTLXSwitch=i.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=Event.listen(this._picture,'load',function(){this._loadListener.remove();this._initialLoad();}.bind(this));},destroy:function(){this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._onclick&&this._onclick.remove();this._loadListener&&this._loadListener.remove();},_initialLoad:function(){var n=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=Event.listen(n,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.width;if(this._defaultOffset!==undefined)this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();if(this._killClicks)this._onclick=Event.listen(n,'click',this._onClick.bind(this));this._saveOffset();},_onClick:function(event){event.kill();},_onMouseDown:function(event){var n=parseInt(j.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=n-k.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();},_startDrag:function(){if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[Event.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),Event.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}},_saveOffset:function(){var n=parseInt(j.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=n+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=n;},_stopDrag:function(){if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(n){n.remove();});this._saveOffset();}},_onMouseUp:function(event){this._stopDrag();event.kill();},_setOffset:function(n){if(this._RTLXSwitch){n=Math.max(0,Math.min(n,-this._maxOffset));}else n=Math.min(0,Math.max(n,this._maxOffset));j.set(this._picture,this._offsetType,n+'px');},_onMouseMove:function(event){this._setOffset(this._pictureStartDragOffset+k.getEventPosition(event)[this._eventCoord]);event.kill();}});e.exports=m;});
__d("TimelineCover",["Button","CSS","DOM","HTML","Parent","DOMScroll","Vector","TimelineController","TimelineDrag","Style","$","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Button'),h=b('CSS'),i=b('DOM'),j=b('HTML'),k=b('Parent'),l=b('DOMScroll'),m=b('Vector'),n=b('TimelineController'),o=b('TimelineDrag'),p=b('Style'),q=b('$'),r=b('copyProperties'),s=b('ge');function t(u,v,w){this.root=q('fbProfileCover');this._parentSection=k.byClass(this.root,'fbTimelineSection');this._coverHeight=v;this.cover=i.find(this.root,'.cover');t.instance=this;this.previewing=w;this.editing=false;if(w){this.editMode();this.updateCoverImage(w);}else if(this.cover.getAttribute('data-collapse'))this._expandCover(parseInt(this.cover.getAttribute('data-collapse'),10));n.register(n.COVER,this);}t.instance=null;t.getInstance=function(){return t.instance;};r(t.prototype,{showLoadingIndicator:function(){var u=s('fbCoverImageContainer');if(u)h.addClass(u,'opaquedLoading');},hideLoadingIndicator:function(){var u=s('fbCoverImageContainer');if(u)h.removeClass(u,'opaquedLoading');},editMode:function(){g.setEnabled(i.find(this.root,'label.cancelButton'),true);g.setEnabled(i.find(this.root,'label.saveButton'),true);this.hideLoadingIndicator();this._coverImage=i.scry(this.root,'.coverImage')[0];var u=i.scry(this._coverImage,'.coverWrap')[0];if(u)this._originalOffset=p.get(i.find(u,'.coverPhotoImg'),'top');h.addClass(this._parentSection,'fbEditCover');l.scrollTo(this.root);if(this.previewing){i.remove(this._coverImage);h.show(this._coverImage);}var v=i.scry(this._coverImage,'.coverPhotoImg')[0];if(v)this._createDragger();this.editing=true;},_expandCover:function(u){u-=1;this.cover.style.marginTop='0px';if(u!=m.getScrollPosition().y){window.scrollBy(0,u);n.coverHasExpanded(u);}},_exitEditMode:function(){if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}i.find(this.root,'input.hiddenPhotoID').value=null;i.find(this.root,'input.hiddenVideoID').value=null;g.setEnabled(i.find(this.root,'label.cancelButton'),false);g.setEnabled(i.find(this.root,'label.saveButton'),false);h.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;},_createDragger:function(){this._timelineDrag=new o(i.find(this.root,'.coverImage .coverPhotoImg'),i.find(this.root,'input.photoOffsetInput'),{height:this._coverHeight,listenOn:this.cover,vertical:true,killClicks:true});},updateCoverImage:function(u,v,w){this.videoID=w;if(v)this.editMode();i.find(this.root,'input.hiddenPhotoID').value=u;i.find(this.root,'input.hiddenVideoID').value=w||null;g.setEnabled(i.find(this.root,'label.saveButton'),true);if(v)i.replace(i.find(this.root,'.coverImage'),j(v));if(this._timelineDrag){this._timelineDrag.setPicture(i.find(i.find(this.root,'.coverImage'),'.coverPhotoImg'));}else this._createDragger();},cancelUpdate:function(){i.remove(i.scry(this.root,'.coverImage')[0]);i.prependContent(this.cover,this._coverImage);if(this._originalOffset!==undefined)p.set(i.find(this._coverImage,'.coverPhotoImg'),'top',this._originalOffset);this._exitEditMode();},saveComplete:function(){this._coverImage=i.scry(this.root,'.coverImage')[0];this._exitEditMode();},isInEditMode:function(){return this.editing;}});e.exports=t;});
requireLazy(['Selector'],function(a){add_properties('__behaviors',{});if(__behaviors.TimelineCurationControl)return;__behaviors.TimelineCurationControl=true;a.subscribe('open',function(b,c){var d=c.selector,e=c.clone||d,f=Parent.byClass(e,'fbTimelineCurationControl');if(f){CSS.addClass(f,'editControlsMenuOpen');var g=a.subscribe('close',function(h,i){if(i.selector==d){a.unsubscribe(g);CSS.removeClass.curry(f,'editControlsMenuOpen').defer();}});}});});
__d("TimelineFriendsNavHovercard",["event-extensions","Hovercard","Keys","Parent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Hovercard'),h=b('Keys'),i=b('Parent'),j=null,k=[],l=-1,m={};m[h.UP]={"-1":0,3:0,4:1,5:2};m[h.RIGHT]={"-1":0,0:1,1:2,2:3,3:4,4:5};m[h.DOWN]={"-1":0,0:3,1:4,2:5};m[h.LEFT]={"-1":0,1:0,2:1,3:2,4:3,5:4};function n(event){g.processNode(event.getTarget())&&event.stop();}function o(event){event.getTarget().tabIndex=-1;g.hide();}function p(event){var r=Event.getKeyCode(event);if(r in m){if(l in m[r]){l=m[r][l];k[l].focus();}event.prevent();}}var q={init:function(r){if(!j){j=i.byTag(r,'a');if(j)Event.listen(j,{keydown:p,focus:function(){l=-1;}});}k.push(r);Event.listen(r,{focus:n,blur:o,mouseover:n,mouseout:function(event){event.getTarget().tabIndex=-1;}});}};e.exports=q;});
__d("TimelineUnitSelector",["DOMQuery"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h={getUnitsWithTime:function(i){return g.scry(i,'div.timelineUnitContainer').filter(function(j){return (j.parentNode.parentNode===i&&j.getAttribute('data-time'));});}};e.exports=h;});
__d("TimelineComposerUtilities",["event-extensions","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx","csx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('Parent'),m=b('TimelineUnitSelector'),n=b('Vector'),o=b('cx'),p=b('csx'),q=86400*31,r=86400000,s={listenToSetEstimatedDate:function(t,u){return g.subscribe('ComposerXTimelineTagger/init',function(v,w){if(k.contains(t,w.datePickerElement)){s.setEstimatedDate(w.datePickerInstance,u());w.composerTimelineTagger.switchToTagger('date');}});},listenToSetEstimatedDateOld:function(t,u){return g.subscribe('TimelineBackdatedComposerTagger/initialized',function(event,v){if(v.composer===t)v.date_picker.subscribe('initialized',function(w,x){s.setEstimatedDate(x,u());});});},listenToPublish:function(t,u){if(t.root)t=t.root;return g.subscribe('composer/publish',function(event,v){if(v.composer_id===t.id)h.loadModules(['TimelineStoryPublisher'],function(w){w.publish(v);u&&u();});});},listenToAnotherComposerOpen:function(t,u){return g.subscribe('composer/mutate',function(v,w){if(w!==t)u();});},listenToCancel:function(t,u){return Event.listen(t,'click',function(event){if(l.byClass(event.getTarget(),"-cx-PRIVATE-fbTimelineComposer__cancelButton"))u();});},listenToCancelOld:function(t,u){return Event.listen(t,'click',function(event){l.byClass(event.getTarget(),'cancelBtn')&&u();});},hidePlaceIfAttachmentsTooTall:function(t){var u=k.find(t,".-cx-PUBLIC-fbTimelineComposerAttachment__root"),v=n.getElementDimensions(u).y;if(v>50)i.hide(k.find(u,".-cx-PRIVATE-fbComposerAttachment__place"));},hidePlaceIfAttachmentsTooTallOld:function(t){var u=j.find(t,'ul.fbTimelineComposerAttachments'),v=n.getElementDimensions(u).y;if(v>50){var w=l.byTag(j.scry(u,'span.placeAttachment')[0],'li');w&&i.hide(w);}},setEstimatedDate:function(t,u){var v,w;if(u&&i.hasClass(u,'fbTimelineCapsule')){v=u.getAttribute('data-start');w=u.getAttribute('data-end');if(v&&w){var x=new Date(w*1000);if(w-v>2*q){t.setDate(x.getFullYear());}else t.setDate(x.getFullYear(),x.getMonth()+1);}return;}var y=l.byClass(u,'fbTimelineCapsule');if(y){v=y.getAttribute('data-start');w=y.getAttribute('data-end');var z=n.getElementPosition(u).y,aa=[w,null],ba=[v,null],ca=m.getUnitsWithTime(y);for(var da=0;da<ca.length;da++){var ea=ca[da],fa=j.scry(ea.parentNode,'.spinePointer')[0];if(!fa)continue;var ga=n.getElementPosition(fa).y;if(ga<=z){if(!aa[1]||ga>aa[1])aa=[ea.getAttribute('data-time'),ga];}else if(!ba[1]||ga<ba[1])ba=[ea.getAttribute('data-time'),ga];}if(aa[0]!==null&&ba[0]!==null){var ha=Math.round((parseInt(aa[0],10)+parseInt(ba[0],10))/2)*1000;ha=Math.min(new Date()-r,ha);t.setDateWithTimestamp(ha);}}},showMLEFlyout:function(t){var u=j.scry(document,'a.fbTimelineSpine').length===0,v=function(w){w.showMLEFlyout(t);};if(u){h.loadModules(['TimelineSpinelessComposer'],v);}else h.loadModules(['TimelineComposer'],v);}};e.exports=s;});
__d("TimelineNavigation",["event-extensions","Arbiter","DOM","CSS","PageTransitions","Parent","TimelineController","TimelineURI","URI","$","createArrayFrom","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('DOM'),i=b('CSS'),j=b('PageTransitions'),k=b('Parent'),l=b('TimelineController'),m=b('TimelineURI'),n=b('URI'),o=b('$'),p=b('createArrayFrom'),q=b('ge'),r=4,s=110,t=20,u=119,v=328,w=10,x=3,y=false,z=21,aa,ba,ca,da=[],ea=[],fa,ga=0,ha,ia=0,ja=0,ka,la=r,ma=false,na=false,oa=null,pa,qa=false,ra,sa,ta=false;function ua(ib,jb,kb){if(!jb.firstChild){h.remove(jb);return;}ea.push(jb);xa(kb.recent);i.removeClass(k.byTag(jb,'li'),'empty');if(fa&&(ia>r||ja>0))i.removeClass(fa,'notready');wa();if(kb.async){bb();db();}}function va(ib,jb,kb){h.remove(k.byTag(jb,'li'));if(!kb.async){ka++;}else{ia--;bb();db();}wa();}function wa(){var ib=fa?0:z;if(ia<=r){var jb=v+u*Math.max(0,r-ia)+ib;if(ha)ha.style.width=jb+'px';la=ia;ya();}}function xa(ib){if(ib){ja++;}else ia++;ya();}function ya(){if(!ra)return;var ib=Math.max(0,ia-r)+ja;if(ga&&fa){h.setContent(ga,ib===0?" ":ib);i.conditionClass(fa,'fbTimelineMoreButtonZero',ib===0);if(!ma)i.conditionShow(fa,ib>0);}}function za(){var ib=h.scry(o('fbTimelineNavTopRow'),'li.tile'),jb=0,kb=0,lb=Math.max(0,r-la),mb=false;for(var nb=0;nb<ib.length;nb++){if(ib[nb]==ha||ib[nb]==fa)continue;mb=((jb+lb)%r===0);i.conditionClass(ib[nb],'leftMost',(jb!==0&&mb));if(!i.hasClass(ib[nb],'empty'))kb=jb;jb++;}mb=((kb+1+lb)%r===0);var ob=ib.length-1-lb;if(mb){if(ma&&(kb+1+lb)/r<x){ob=Math.min(ob,kb+r);na=true;}else ob=kb;}else{var pb=((kb+1+lb)%r);ob=kb+(r-pb);na=false;}nb=0;for(nb=0;nb<=ob;nb++)if(ib[nb]&&(ib[nb]==ha||ib[nb]==fa)){ob++;}else ib[nb]&&i.hasClass(ib[nb],'empty')&&i.removeClass(ib[nb],'hidden_elem');}function ab(ib,jb,kb){var lb=h.scry(ib,'li.tile');if(!jb)jb=0;var mb=false;for(var nb=jb;nb<lb.length;nb++){mb=((nb-kb)%r===0);var ob=lb[nb];i.conditionClass(ob,'leftMost',mb);if(i.hasClass(ob,'empty'))i.removeClass(ob,'hidden_elem');}}function bb(){za();var ib=q('fbTimelineNavSecondaryRow');ib&&ab(ib,0,0);}function cb(){if(!fa)return;if(i.hasClass(fa,'notready'))return;i.toggleClass(fa,'fbTimelineMoreButtonOpen');var ib=q('fbRecentAppTitle');ib&&i.conditionClass(ib,'hidden_elem',ja===0);if(i.hasClass(fa,'fbTimelineMoreButtonOpen')){bb();}else ya();db();}function db(){if(fa&&!i.hasClass(fa,'fbTimelineMoreButtonOpen')){aa.style.height='';i.removeClass(aa,'expanded');}else{var ib=ia+(r-la),jb=((ja>0)?w:0)+s*(Math.ceil(ja/r))+s*(Math.ceil(ib/r))+s*(na?1:0)+t;i.addClass(aa,'expanded');aa.style.height=jb+'px';}}function eb(ib){var jb=ib==m.TIMELINE_KEY||ib==m.WALL_KEY,kb=k.byClass(aa,'fbTimelineTopSectionBase'),lb=q('timeline_tour_toolbar');if(fa){i.removeClass(fa,'fbTimelineMoreButtonOpen');db();}lb&&i.conditionShow(lb,jb);if(kb)i.conditionClass(kb,'collapsedHead',!jb);}function fb(event){if(ta)return true;if(!k.byTag(event.getTarget(),'a')){var ib=h.find(ha,'a.title');j.go(ib.href);}}function gb(){if(fa)(function(){fa.removeAttribute('ajaxify');fa.removeAttribute('rel');}).defer();oa&&oa.remove();}var hb={UPDATE_PAGE:'TimelineNavigation/updatePage',init:function(ib,jb,kb,lb){if(y)return;y=true;aa=ib;fa=jb;ba=n.getRequestURI();ha=h.scry(aa,'li.about')[0];eb(l.getCurrentKey());ma=lb;g.inform(hb.UPDATE_PAGE);if(fa){ga=h.find(fa,'div.text');oa=Event.listen(fa,'click',gb);}pa=o('fbTimelineNavigationLoadContainer');h.appendContent(o('content'),pa);if(ha)sa=Event.listen(ha,'click',fb);da.forEach(function(nb){if(!nb[2].remove){ua.apply(this,nb);}else va.apply(this,nb);});da=[];var mb=k.byClass(ib,'fbTimelineSection');if(mb)h.scry(mb,'ul.uiButtonGroup').forEach(function(nb){p(nb.childNodes).forEach(function(ob){ob.childNodes.length||h.remove(ob);});if(nb.firstChild){i.addClass(nb.firstChild,'firstItem');}else h.remove(nb);});l.register(l.NAV,hb);},reset:function(){sa&&sa.remove();sa=null;ra&&ra.remove();ra=null;y=false;aa=null;ca=null;ea=[];fa=null;ga=null;ha=null;ia=0;ja=0;ka=0;la=r;ma=false;na=false;pa=null;qa=false;ta=false;},initializeMorePager:function(){if(ra)return;if(fa)ra=Event.listen(fa,'click',cb);},registerNav:function(ib,jb,kb){y?(kb.remove?va.apply(this,arguments):ua.apply(this,arguments)):da.push(arguments);},redraw:function(){bb();db();},setEditMode:function(ib){ta=ib;}};e.exports=hb;});
__d("TimelineBackdatedComposer",["Arbiter","Bootloader","CSS","DOM","LayerHideOnBlur","Run","TimelineComposerUtilities","TimelineNavigation"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('LayerHideOnBlur'),l=b('Run'),m=b('TimelineComposerUtilities'),n=b('TimelineNavigation'),o;function p(){q();r();}function q(){o.hide();}function r(){h.loadModules(['TimelineMLE'],function(t){var u=t.getFlyout();if(u&&i.hasClass(u.getContext(),'backdatedDot'))t.hideFlyout();});}var s={init:function(t,u){o=u;var v=[m.listenToPublish(t,p),m.listenToAnotherComposerOpen(t,p),m.listenToSetEstimatedDateOld(t,o.getContext.bind(o)),t.subscribeToMutate(function(){var x=!j.scry(t.root,'.cancelBtn')[0]||j.scry(t.root,'.attachmentLifeEvents')[0];if(x){o.enableBehavior(k);}else o.disableBehavior(k);}),g.subscribe('TimelineMLE/mleFlyoutShown',function(x,y){if(i.hasClass(y.getContext(),'backdatedDot')){q();}else p();}),g.subscribe(n.UPDATE_PAGE,p)],w=m.listenToCancelOld(o.getContent(),p);l.onLeave(function(){v.forEach(g.unsubscribe.bind(g));v=[];w.remove();w=null;});g.inform('TimelineBackdatedComposer/initialized');},getFlyout:function(){return o;}};e.exports=a.TimelineBackdatedComposer||s;});
__d("TimelineSpine",["array-extensions","event-extensions","Arbiter","AsyncRequest","Bootloader","Composer","ComposerXController","CSS","DOM","Layer","LayerHideOnBlur","Parent","Run","TimelineBackdatedComposer","TimelineComposerUtilities","copyProperties"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Bootloader'),j=b('Composer'),k=b('ComposerXController'),l=b('CSS'),m=b('DOM'),n=b('Layer'),o=b('LayerHideOnBlur'),p=b('Parent'),q=b('Run'),r=b('TimelineBackdatedComposer'),s=b('TimelineComposerUtilities'),t=b('copyProperties');function u(){}t(u,{OFFSET_Y:12,composerFlyout:null,composerRoot:null,mleFlyout:null,dot:null,loadComposerFlyoutCalled:false,showComposerFlyout:function(v){var w=u.composerFlyout;if(!w){u.loadComposerFlyout(v);u.showComposerFlyoutOnLoad=true;return;}if(u.composerRoot){k.reset(u.composerRoot);s.hidePlaceIfAttachmentsTooTall(u.composerRoot);}else{var x=m.scry(w.getContent(),'div.fbTimelineBackdatedComposer')[0],y=j.getInstance(x);if(y){y.reset();l.removeClass(y.root,'uiComposerOpen');}s.hidePlaceIfAttachmentsTooTallOld(x);}w.enableBehavior(o).setContext(u.dot).updatePosition();w.show();},loadComposerFlyout:function(v){if(u.loadComposerFlyoutCalled||u.composerFlyout)return;u.loadComposerFlyoutCalled=true;q.onLeave(function(){u.loadComposerFlyoutCalled=false;u.composerFlyout=null;u.composerRoot=null;}.bind(this));new h().setURI('/ajax/timeline/backdated_composer.php').setData({targetid:v}).setRelativeTo(u.dot||document.body).send();var w=g.subscribe('TimelineBackdatedComposer/initialized',function(x,y){if(y){u.composerFlyout=y.getFlyout();u.composerRoot=y.getComposerRoot();}else u.composerFlyout=r.getFlyout();if(u.showComposerFlyoutOnLoad)u.showComposerFlyout(v);u._handleComposerFlyoutDismissed();w.unsubscribe();});},showMLEFlyout:function(v){u.mleFlyout=v;v.setContext(u.dot).show();u.composerFlyout.hide();},_handleComposerFlyoutDismissed:function(){var v=n.subscribe('hide',function(w,x){if(u.dot&&x.getContext)if(x.getContext()===u.dot&&!u.mleFlyout){u._hideDot();}else if(x===u.mleFlyout){u.mleFlyout=null;u._hideDot();}});q.onLeave(function(){n.unsubscribe(v);}.bind(this));},_hideDot:function(){m.remove(u.dot);u.dot=null;}});t(u.prototype,{init:function(v,w){this._spine=v;this._plus=m.find(v,'.spineHoverPlus');this._capsule=p.byClass(v,'fbTimelineCapsule');this._targetid=w;var x=[Event.listen(v,'mouseenter',function(event){u.loadComposerFlyout(this._targetid);this._spineHeight=v.offsetHeight;}.bind(this)),Event.listen(v,'mousemove',this._mouseMoved.bind(this)),Event.listen(v,'click',this._spineClicked.bind(this))];l.addClass(this._plus,'spineHoverPlusActive');q.onLeave(function(){while(x.length)x.pop().remove();}.bind(this));},_mouseMoved:function(event){var v=event.offsetY||event.layerY,w=event.getTarget();if(w!==this._spine)v=w.offsetTop+v;v=Math.min(Math.max(v-u.OFFSET_Y,0),this._spineHeight);this._plus.style.top=v+'px';},_spineClicked:function(event){if(u.mleFlyout){i.loadModules(['TimelineMLE'],function(v){v.hideFlyout();});return;}u.dot&&m.remove(u.dot);u.dot=m.create('i',{className:'backdatedDot'});u.dot.style.top=(this._plus.offsetTop-1)+'px';m.appendContent(this._spine,u.dot);event.stop();u.showComposerFlyout(this._targetid);}});e.exports=a.TimelineSpine||u;});
__d("legacy:TimelineSpine",["TimelineSpine"],function(a,b,c,d){a.TimelineSpine=b('TimelineSpine');},3);
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","UserAgent","Vector","$","createArrayFrom","isEmpty","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('Parent'),n=b('TimelineConstants'),o=b('TimelineLegacySections'),p=b('UserAgent'),q=b('Vector'),r=b('$'),s=b('createArrayFrom'),t=b('isEmpty'),u=b('requestAnimationFrame'),v=(function(){var w=45,x=15,y='use',z='update',aa={},ba={};function ca(pa){return h.hasClass(pa,'fbTimelineBalancer');}function da(pa){return pa.getAttribute('data-spine');}function ea(pa){return h.hasClass(pa,'placeholderUnit');}function fa(pa,qa){if(qa)return (i.get(n.DS_SIDEORG,pa.id)||pa.getAttribute('data-side'));return pa.getAttribute('data-side');}var ga=function(pa,qa){if(p.ie()<=6){ga=function(ra,sa){i.set(n.DS_SIDEORG,ra.id,fa(ra,true));ra.setAttribute('data-side',sa);h.removeClass(ra,'leftColumn');h.removeClass(ra,'rightColumn');h.addClass(ra,sa=='l'?'leftColumn':'rightColumn');};}else ga=function(ra,sa){i.set(n.DS_SIDEORG,ra.id,fa(ra,true));ra.setAttribute('data-side',sa);};ga(pa,qa);};function ha(pa){return pa.getAttribute('data-size');}function ia(pa){if(h.hasClass(pa,'fbTimelineOneColumn')&&pa.prevSibling&&h.hasClass(pa.prevSibling,'fbTimelineOneColumn'))return x*2;if(h.hasClass(pa,'fbTimelineIndeterminateContent'))return 0;return x;}function ja(pa,qa){var ra=0;if(h.shown(pa)&&!h.hasClass(pa,'placeholderUnit'))if(qa===y){ra=i.get(n.DS_HEIGHT,pa.id,null);if(ra===null)ra=pa.getAttribute('data-calculatedheight');}else ra=pa.offsetHeight+ia(pa);if(qa===y&&ra===null)ra=300;i.set(n.DS_HEIGHT,pa.id,parseInt(ra,10));}function ka(pa){var qa=i.get(n.DS_HEIGHT,pa.id,null);return qa;}function la(pa,qa){if(ha(qa)=='2'){return 0;}else if(fa(qa)=='r'){return pa+ka(qa);}else return pa-ka(qa);}function ma(pa){for(var qa=0;qa<pa.childNodes.length;qa++){var ra=pa.childNodes[qa];if(!ra.getAttribute('data-endmarker'))continue;var sa=ra.getAttribute('data-endmarker'),ta=ra.getAttribute('data-pageindex'),ua=function(){i.set(n.DS_LOADED,pa.id,ta);j.remove(ra);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:sa,pageIndex:ta,capsuleID:pa.id,childCount:pa.childNodes.length});};if(o.get(sa)){ua();}else var va=g.subscribe(n.SECTION_REGISTERED,function(wa,xa){if(xa.scrubberKey===sa){ua();va.unsubscribe();}});break;}g.inform('TimelineCapsule/balanced',{capsule:pa});}function na(pa){if(t(aa[pa.id]))return;var qa=ca(pa)?pa.firstChild:pa,ra=qa.childNodes.length,sa={},ta={},ua,va=x,wa=x,xa,ya=[];for(var za=0;za<ra;za++){ua=qa.childNodes[za];if(h.hasClass(ua,'fbTimelineUnit')){xa=k.scry(ua,'div.timelineUnitContainer')[0];if(xa)ta[ua.id]=xa.getAttribute('data-time');if(!ea(ua)&&h.shown(ua)){if(ha(ua)=='2'){sa[ua.id]=Math.max(va,wa);va=wa=sa[ua.id]+ka(ua);}else if(fa(ua)=='r'){sa[ua.id]=wa;wa+=ka(ua);}else{sa[ua.id]=va;va+=ka(ua);}if(fa(ua,true)=='l'||ha(ua)=='2')ya.push(ua.id);}}}for(za=0;za<ya.length-1;++za){var ab=ya[za],bb=ya[za+1],cb=sa[ab]+w,db=sa[bb];for(var eb in aa[pa.id]){if(cb>db)break;var fb=aa[pa.id][eb];if(h.shown(fb))continue;if(ta[eb]<=ta[ab]&&ta[eb]>ta[bb]){fb.style.top=cb+"px";cb+=w;h.show(fb);}}}}function oa(pa,qa){var ra=m.byAttribute(pa,'data-size');if(ra){if(h.hasClass(pa.parentNode,'timelineReportContent')){qa(pa);}else qa(ra);v.balanceCapsule(m.byClass(ra,'fbTimelineCapsule'));}}return {removeUnit:function(pa){oa(pa,function(qa){j.remove(qa);});},hideUnit:function(pa){oa(pa,function(qa){h.addClass(qa,'fbTimelineColumnHidden');});},undoHideUnit:function(pa,qa){j.remove(m.byClass(qa,'hiddenText'));oa(pa,function(ra){h.removeClass(ra,'fbTimelineColumnHidden');});},unplacehold:function(pa){var qa=r(pa);qa.style.top=null;h.removeClass(qa,'visiblePlaceholder');h.removeClass(qa,'placeholder');var ra=m.byClass(qa,'fbTimelineCapsule');delete aa[ra.id][pa];v.balanceCapsule(ra);},scrollToCapsule:function(pa){if(!ba.hasOwnProperty(pa.id)){var qa=q.getElementPosition(pa.parentNode);l.scrollTo(new q(q.getScrollPosition().x,qa.y-n.SUBSECTION_SCROLL_TO_OFFSET,'document'));ba[pa.id]=true;}},balanceCapsuleFromChild:function(pa,qa){v.balanceCapsule(m.byClass(pa,'fbTimelineCapsule'),qa);},balanceCapsuleDeferred:function(pa,qa){v.balanceCapsule.curry(pa,qa).defer();},balanceCapsule:function(pa,qa){if(!pa||!pa.childNodes)return;var ra=0,sa,ta=document.createDocumentFragment(),ua=[],va=[],wa=[],xa=false,ya=qa&&qa.heights_action;if(qa&&qa.tail_balance)i.set(n.DS_TAILBALANCE,pa.id,qa.tail_balance);if(ya!==z&&(p.chrome()||p.webkit()))h.toggleClass(pa,'webkitFix');for(var za=0;za<pa.childNodes.length;za++){sa=pa.childNodes[za];if(da(sa)){continue;}else if(ca(sa)){s(sa.firstChild.childNodes).forEach(function(hb){ja(hb,ya);});continue;}ja(sa,ya);if(fa(sa,true)=='r'){va.push(sa);}else ua.push(sa);wa.push(sa);if(ha(sa)!='2')if((ra>0&&fa(sa)=='r')||(ra<0&&fa(sa)=='l'))xa=true;ra=la(ra,sa);}var ab=[],bb=[],cb=[];k.scry(pa,'li.fbTimelineBalancer').forEach(function(hb){var ib=s(hb.firstChild.childNodes);if(hb.getAttribute('data-nonunits')){cb=cb.concat(ib);}else if(fa(hb)=='left'){ab=ab.concat(ib);}else if(fa(hb)=='right')bb=bb.concat(ib);});if(xa){pa.style.minHeight=pa.offsetHeight;ua.forEach(function(hb){if(ha(hb)!='2')ga(hb,'l');});va.forEach(function(hb){if(ha(hb)!='2')ga(hb,'r');});var db=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,ua));db.setAttribute('data-side','left');j.prependContent(pa,db);ab=ua.concat(ab);var eb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,va));eb.setAttribute('data-side','right');j.prependContent(pa,eb);bb=va.concat(bb);ra=0;}while((ra>=0&&ab.length)||(ra<0&&bb.length)){if(ra>=0){sa=ab.shift();}else sa=bb.shift();ta.appendChild(sa);ra=la(ra,sa);}while(cb.length)ta.appendChild(cb.shift());pa.appendChild(ta);k.scry(pa,'li.fbTimelineBalancer').forEach(function(hb){if(!hb.firstChild.childNodes.length)j.remove(hb);});var fb=(qa&&qa.tail_balance)||i.get(n.DS_TAILBALANCE,pa.id);if(fb)ra=v.tailBalance(pa,ra,fb);if(xa){wa.forEach(function(hb){if(hb.parentNode!==pa){pa.appendChild(hb);ra=la(ra,hb);}});pa.style.minHeight=null;}var gb=m.byClass(pa,'fbTimelineSection');if(gb)i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,gb.id,ra);aa[pa.id]={};k.scry(pa,'li.placeholderUnit').forEach(function(hb){aa[pa.id][hb.id]=hb;});na(pa);ma(pa);if(ya===y){qa.heights_action=z;u(function(){u(v.balanceCapsule.curry(pa,qa));});}},tailBalance:function(pa,qa,ra){if(!pa)return qa;var sa=[],ta=[],ua=[],va=[];k.scry(pa,'li.fbTimelineBalancer').forEach(function(xa){var ya=s(xa.firstChild.childNodes);if(xa.getAttribute('data-nonunits')){va=va.concat(ya);}else if(fa(xa)=='left'){ta=ta.concat(ya);}else if(fa(xa)=='right')ua=ua.concat(ya);sa=sa.concat(ya);});if((ra==n.FIXED_SIDE_RIGHT&&ta.length)||(ra==n.FIXED_SIDE_LEFT&&ua.length))return qa;var wa=document.createDocumentFragment();if(sa)while(sa.length){if(ra!=n.FIXED_SIDE_NONE)if(ha(sa[0])!='2')if(qa>=0){ga(sa[0],'l');}else ga(sa[0],'r');qa=la(qa,sa[0]);wa.appendChild(sa.shift());}pa.appendChild(wa);k.scry(pa,'li.fbTimelineBalancer').forEach(function(xa){if(!xa.firstChild.childNodes.length)j.remove(xa);});return qa;}};})();e.exports=a.TimelineCapsule||v;});
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f){var g=b('CSS'),h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;});
__d("TimelineComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","TimelineCapsule","TimelineCapsuleUtilities","TimelineComposerUtilities","$","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('TimelineCapsule'),n=b('TimelineCapsuleUtilities'),o=b('TimelineComposerUtilities'),p=b('$'),q=b('cx'),r;function s(x){if(x.isScheduledPost||x.isOGPost)return;if(!x.streamStory){window.location.reload();return;}if(x.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(z){z.publish(x);});return;}var y=w.renderCapsuleBasedStory(r,x.streamStory);g.inform('TimelineComposer/on_after_publish',y,g.BEHAVIOR_PERSISTENT);}function t(){var x=k.byClass(r,'fbTimelineTwoColumn');return j.find(x,'.spinePointer');}function u(x){var y=v();i.show(y);var z=x.subscribe('hide',function(){i.hide(y);x.unsubscribe(z);});}function v(){var x=k.byClass(r,'fbTimelineTwoColumn'),y=j.scry(x,'div.composerVeil');if(y.length!==1)y=j.appendContent(x,j.create('div',{className:'composerVeil hidden_elem'}));return y[0];}var w={init:function(x){r=p(x);var y=g.subscribe('composer/publish',function(event,z){if(z.composer_id===r.id)s(z);});l.onLeave(y.unsubscribe.bind(y));if(i.hasClass(r,"-cx-PRIVATE-fbTimelineComposer__root")){o.hidePlaceIfAttachmentsTooTall(r);}else o.hidePlaceIfAttachmentsTooTallOld(r);},showMLEFlyout:function(x){x.setContext(t()).show();u(x);},renderCapsuleBasedStory:function(x,y){var z=k.byClass(x,'fbTimelineCapsule');if(!z)return;var aa=k.byClass(x,'timelineUnitContainer').parentNode;if(aa.nextSibling.getAttribute('data-spine'))aa=aa.nextSibling;var ba=j.insertAfter(aa,y)[0];h.loadModules(['Animation'],function(ca){ca(ba.firstChild).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(ca.ease.both).go();});n.setFirstUnit(z);m.balanceCapsule(z);return ba;}};e.exports=a.TimelineComposer||w;});
__d("TimelineSmartInsert",["CSS","DOM","Run","UserAgent","Vector"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Run'),j=b('UserAgent'),k=b('Vector'),l=false,m=false;function n(){if(m)return;i.onLeave(o);m=true;}function o(){l=false;m=false;}var p={BUFFER:100,run:function(q,r){n();if(!l||j.ie()<=8){r();return;}var s=q.offsetHeight;r();var t=q.offsetHeight;if(t-s!==0&&k.getElementPosition(q).y+s<k.getScrollPosition().y+p.BUFFER)window.scrollBy(0,t-s);},enable:function(){l=true;}};e.exports=p;});
__d("TimelineContentLoader",["event-extensions","function-extensions","Arbiter","CSS","DOM","DOMScroll","OnVisible","ScrollingPager","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","TimelineURI","UIPagelet","UserAgent","Vector","$","copyProperties","createArrayFrom","csx","debounce","ge","startsWith","tx","userAction"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DOMScroll'),k=b('OnVisible'),l=b('ScrollingPager'),m=b('TimelineConstants'),n=b('TimelineController'),o=b('TimelineLegacySections'),p=b('TimelineSmartInsert'),q=b('TimelineURI'),r=b('UIPagelet'),s=b('UserAgent'),t=b('Vector'),u=b('$'),v=b('copyProperties'),w=b('createArrayFrom'),x=b('csx'),y=b('debounce'),z=b('ge'),aa=b('startsWith'),ba=b('tx'),ca=b('userAction'),da=false,ea=false,fa,ga=null,ha={},ia=[],ja=[],ka={},la={},ma={},na={},oa=null,pa=null,qa=false,ra=null;function sa(bb,cb,db,eb,fb){this.node=bb;this.loaded=eb;this.canScrollLoad=true;this.canUnload=cb!=ab.RECENT;this.scrubberKey=cb;this.historicUnitCount=fb;this._pageletLoadData=db;this._expandPageletLoadData={};}v(sa.prototype,{load:function(bb){if(this.loaded)return;var cb=this._pageletLoadData;g.inform(m.SECTION_LOADING,{data:cb,scrubberKey:this.scrubberKey});this.loaded=true;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var db='ProfileTimelineSectionPagelet';if(this.scrubberKey==ab.WAY_BACK)db='ProfileTimelineRemainingYearsPagelet';cb.time_cutoff=ab.getTimeCutoff();cb.highlight_unit_data=bb;cb.parent_key=this.parentKey;cb.force_no_friend_activity=qa;h.addClass(this.node,'fbTimelineSectionLoading');if(this.canUnload&&ea){var eb=this.node.firstChild.cloneNode(true);h.hide(eb);i.insertAfter(this.node,eb);}else this.canScrollLoad=false;ma[this.scrubberKey]=r.loadFromEndpoint(db,this.node.id,cb,{usePipe:true,jsNonblock:true,constHeight:true});za(this.scrubberKey);},preload:function(){h.addClass(this.node,'fbTimelineTimePeriodSuppressed');h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var bb=i.find(this.node,'span.sectionLabel');if(bb.getAttribute('data-original-label')){i.setContent(bb,bb.getAttribute('data-original-label'));bb.removeAttribute('data-original-label');}},unload:function(){if(!this.loaded||!this.canUnload)return;this.loaded=false;ma[this.scrubberKey]&&ma[this.scrubberKey].cancel();h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&h.hasClass(this.node.nextSibling,'fbTimelineSection')){i.setContent(this.node,this.node.nextSibling);h.show(this.node.firstChild);}else i.empty(this.node);this.deactivateScrollLoad();},activateScrollLoad:function(){this.canScrollLoad=true;h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');la[this.scrubberKey]&&la[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this.canScrollLoad=false;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.addClass(this.node,'fbTimelineTimePeriodSuppressed');la[this.scrubberKey]&&la[this.scrubberKey].remove();}},setExpandLoadData:function(bb){this._expandPageletLoadData=bb;return this;},expandSubSections:function(){if(this.subSections.length)ab.navigateToSection(this.subSections[0].scrubberKey);},expand:function(bb){if(!this.loaded)return;pa.add_event('expand_'+this.scrubberKey);var cb=i.find(this.node,'.fbTimelineSectionExpander');h.addClass(cb.firstChild,'async_saving');bb&&h.addClass(bb,'async_saving');this._expandPageletLoadData.time_cutoff=ab.getTimeCutoff();ab.navigateToSection(this.scrubberKey);i.scry(this.node,'ol.fbTimelineCapsule').forEach(i.remove);this._expandPageletLoadData.new_expand=true;ma[this.scrubberKey]&&ma[this.scrubberKey].cancel();ma[this.scrubberKey]=r.loadFromEndpoint('ProfileTimelineSectionPagelet',cb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});},isPermalinkPeriod:function(){return this._pageletLoadData.is_permalink_period;}});function ta(){if(da)return;n.register(n.CONTENT,ab);pa=ca('timeline').uai('init','scrubber',false);da=true;if(s.ie()<=7)ea=true;}var ua=y(function(bb,cb,db){var eb=o.get(bb).historicUnitCount;cb-=eb;db-=1;if(eb==-1||db<=0||cb<0)return;var fb=ab.getNextSectionKey(bb);if(fb){o.get(fb).load();ua(fb,cb,db);}},500);function va(bb,cb,db,eb){var fb=ab.getNextSectionKey(cb);if(fb){la[fb]=new k(bb,wa.curry(fb,bb),false,db||1000);}else if(cb!==ab.WAY_BACK){eb=eb?eb:0;if(eb>80)return null;va.curry(bb,cb,db,eb+1).defer(250);}}function wa(bb,cb){var db=o.get(bb);if(db&&db.canScrollLoad){pa.add_event("scroll_load_"+bb);if(ea){db.preload();}else{db.load();if(ra)ua(bb,ra.required_units,ra.max_parallelism);}cb&&i.remove(cb);}}function xa(){var bb,cb,db=false;for(var eb=0;eb<ia.length;eb++){var fb=ia[eb];if(!fb)continue;var gb=o.get(fb);if(gb&&(gb.canScrollLoad||gb.loaded)){if(!gb.loaded){h.removeClass(gb.node,'fbTimelineTimePeriodSuppressed');h.addClass(gb.node,'fbTimelineTimePeriodUnexpanded');}if(bb&&cb){ya(bb,cb);if(db)bb.deactivateScrollLoad();db=true;}bb=null;cb=null;continue;}else if(bb){cb=gb;gb.deactivateScrollLoad();}else{bb=gb;if(db)gb.activateScrollLoad();}h.removeClass(gb.node,'fbTimelineTimePeriodSuppressed');h.addClass(gb.node,'fbTimelineTimePeriodUnexpanded');}}function ya(bb,cb){h.removeClass(cb.node,'fbTimelineTimePeriodUnexpanded');h.addClass(cb.node,'fbTimelineTimePeriodSuppressed');var db=i.find(bb.node,'span.sectionLabel'),eb=i.find(cb.node,'span.sectionLabel');if(!eb.getAttribute('data-original-label'))eb.setAttribute('data-original-label',i.getText(eb));if(db.getAttribute('data-month')&&eb.getAttribute('data-month')&&db.getAttribute('data-year')==eb.getAttribute('data-year')){i.setContent(eb,ba._("Show {month1} - {month2} {year}",{month1:eb.getAttribute('data-month'),month2:db.getAttribute('data-month'),year:db.getAttribute('data-year')}));}else if(db.getAttribute('data-year')!==eb.getAttribute('data-year')){i.setContent(eb,ba._("Show {year1} - {year2}",{year1:eb.getAttribute('data-year'),year2:db.getAttribute('data-year')}));}else i.setContent(eb,ba._("Show {year}",{year:eb.getAttribute('data-year')}));}function za(bb){if(ea)for(var cb=0;cb<ia.length-1;cb++){var db=ia[cb];if(!db)continue;if(db!=bb){var eb=o.get(db);if(eb.loaded&&eb.canUnload)eb.unload();}}xa();}var ab={WAY_BACK:'way_back',RECENT:'recent',HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,FOOTER_HEIGHT:60,registerTimePeriod:function(bb,cb,db,eb,fb,gb,hb){ta();if(ja.contains(cb))return;var ib=new sa(bb,cb,db,eb,hb);if(!fb){ia[gb]=cb;ha[cb]=true;}else{ib.parentKey=fb;o.get(fb).subSections=o.get(fb).subSections||[];o.get(fb).subSections[gb]=ib;}o.set(cb,ib);ab.checkCurrentSectionChange();g.inform(m.SECTION_REGISTERED,{scrubberKey:cb});n.registerSectionKey(cb,gb);},reset:function(){for(var bb in la)la[bb].remove();for(var cb in ma)ma[cb]&&ma[cb].cancel();for(var db in na){na[db].unsubscribe();delete na[db];}fa&&fa.unsubscribe();fa=null;o.removeAll();ga=null;ha={};ia=[];ja=[];ka={};la={};ma={};oa=null;pa=null;qa=false;da=false;},checkCurrentSectionChange:function(){var bb=ab.getCurrentSection(),cb=ga&&ga.scrubberKey;if(bb&&bb.scrubberKey!==cb&&!bb.isPermalinkPeriod()){ga=bb;var db=bb.scrubberKey,eb=bb.parentKey;if(!eb){eb=db;db=null;}n.sectionHasChanged(eb,db);}},setTimeCutoff:function(bb){oa=bb;},getTimeCutoff:function(){return oa;},setParallelLoadConfig:function(bb){ra=bb;},getCurrentSection:function(){var bb={},cb=o.getAll();for(var db in cb){var eb=cb[db];if(!eb.loaded||ka[eb.scrubberKey])continue;var fb=t.getElementPosition(eb.node,'viewport').y;if(eb.scrubberKey=='recent')fb--;if(fb<ab.CURRENT_SECTION_OFFSET)bb[fb]=eb;}var gb=Math.max.apply(null,Object.keys(bb)),hb=gb==-Infinity;if(!hb){return bb[gb];}else if(ia[0])return o.get(ia[0]);return null;},capsuleForCurrentSection:function(){var bb=ab.getCurrentSection();return bb&&i.scry(bb.node,'ol.fbTimelineCapsule')[0];},enableScrollLoad:function(bb,cb,db,eb){bb=u(bb);var fb=i.scry(bb.parentNode,'ol.fbTimelineCapsule')[0];if(!fb)return;if(db===null){va(bb,cb,eb);}else n.runOnceWhenSectionFullyLoaded(va.curry(bb,cb,eb),cb,db);},enableScrollLoadOnClick:function(bb,cb,db){bb=u(bb);Event.listen(bb,'click',function(eb){eb.preventDefault();ab.enableScrollLoad(bb,cb,null,db);});},expandSectionOnClick:function(bb,cb){Event.listen(bb,'click',function(db){db.preventDefault();o.get(cb).expand();});},expandSubSectionsOnClick:function(bb,cb){Event.listen(bb,'click',function(db){db.preventDefault();o.get(cb).expandSubSections();});},getNextSectionKey:function(bb){for(var cb=0;cb<ia.length-1;cb++)if(ia[cb]==bb){while(cb<ia.length-1&&!ia[cb+1])cb++;return ia[cb+1];}var db=o.get(bb);if(!db||!db.parentKey)return;var eb=o.get(db.parentKey);if(!eb)return;for(var fb=0;fb<eb.subSections.length-1;fb++)if(eb.subSections[fb].scrubberKey==bb)return eb.subSections[fb+1].scrubberKey;},hideSection:function(bb){var cb=o.get(bb);cb&&h.hide(cb.node);var db=n.getCurrentScrubber();if(db){var eb=n.getCurrentScrubber().getNav(bb);eb&&h.hide(eb);}var fb=n.getCurrentStickyHeaderNav();fb&&fb.removeTimePeriod(bb);ka[bb]=true;},loadSectionOnClick:function(bb,cb){Event.listen(bb,'click',function(db){db.preventDefault();o.get(cb).load();});},removeSection:function(bb){for(var cb in ia)if(ia[cb]==bb){ia[cb]=null;break;}o.remove(bb);delete ha[bb];if(bb in la){la[bb].remove();delete la[bb];}var db=n.getCurrentStickyHeaderNav();db&&db.removeTimePeriod(bb);ja.push(bb);},removeSectionParent:function(bb){i.remove(u(bb).parentNode);},navigateToSection:function(bb,cb,db){pa.add_event("nav_"+bb);cb=!!cb;var eb=bb,fb=o.get(bb);if(!fb)return;if(!fb.loaded){p.enable();i.scry(u('timeline_tab_content'),'.fbTimelineShowOlderSections').forEach(i.remove);}if(!ha[bb]){fb.node.style.minHeight=t.getViewportDimensions().y+'px';var gb=g.subscribe(m.SECTION_FULLY_LOADED,function(ob,pb){if(pb.scrubberKey===bb){fb.node.style.minHeight='';gb.unsubscribe();}});eb=fb.parentKey;var hb=o.get(eb).node;if(!h.hasClass(hb,'fbTimelineSectionExpanded')){j.scrollTo(hb,0);h.addClass(hb,'fbTimelineSectionExpanded');i.scry(hb,'ol.fbTimelineCapsule').forEach(i.remove);i.scry(hb,'div.fbTimelineSectionExpandPager').forEach(i.remove);i.scry(hb,'div.fbTimelineContentHeader').forEach(i.remove);i.scry(hb,".-cx-PRIVATE-fbTimelineOneColumnHeader__header").forEach(function(ob){if(!ob.getAttribute('data-subsection'))i.remove(ob);});}var ib=ab.getNextSectionKey(eb);if(ib&&la[ib])la[ib].setBuffer(0);}for(var jb=0;jb<ia.length;jb++){var kb=ia[jb];if(!kb)continue;if(kb==eb)break;o.get(kb).deactivateScrollLoad();i.scry(u('timeline_tab_content'),'.fbTimelineSectionExpandPager').forEach(function(ob){var pb=l.getInstance(ob.id);pb&&pb.removeOnVisible();});}ab.adjustContentPadding();fb.load(db);xa();var lb=t.getScrollPosition().x,mb=t.getElementPosition(fb.node).y;if(!cb){var nb=ha[bb]?m.SCROLL_TO_OFFSET:m.SUBSECTION_SCROLL_TO_OFFSET;j.scrollTo(new t(lb,mb-nb,'document'),true,false,false,function(){var ob=t.getElementPosition(fb.node).y;j.scrollTo(new t(lb,ob-nb,'document'),false);var pb=i.scry(fb.node,'h3.uiHeaderTitle')[0];if(pb){pb.tabIndex=0;pb.focus();}});}},adjustContentPadding:function(){var bb=z('timeline_tab_content');if(!bb)return;var cb=n.getCurrentKey()||q.TIMELINE_KEY;if(cb!==q.TIMELINE_KEY)return;var db=ia.length-1,eb=o.get(ia[db]);bb.style.paddingBottom=eb&&eb.loaded?null:t.getViewportDimensions().y-ab.CURRENT_SECTION_OFFSET-ab.HEADER_SCROLL_CUTOFF-ab.FOOTER_HEIGHT+'px';},adjustContentPaddingAfterLoad:function(bb,cb){n.runOnceWhenSectionFullyLoaded(ab.adjustContentPadding,bb,cb);},appendContentAfterLoad:function(bb,cb,db){n.runOnceWhenSectionFullyLoaded(i.appendContent.curry(u(bb),cb),db,'0');},markSectionAsLoaded:function(bb,cb,db){n.runOnceWhenSectionFullyLoaded(function(){z(bb)&&h.removeClass(u(bb).parentNode,'fbTimelineSectionLoading');},cb,db);},suppressSectionsAbove:function(bb){var cb,db;for(var eb=0;eb<ia.length;eb++){var fb=ia[eb];if(!fb)continue;cb=o.get(fb).node;db=null;if(w(bb.parentNode.children).indexOf(bb)<=w(cb.parentNode.children).indexOf(cb)){db=fb;break;}o.get(fb).deactivateScrollLoad();}if(db)ab.navigateToSection(db,true);},forceNoFriendActivity:function(){qa=true;},removeDupes:function(bb){var cb=z(bb);if(!cb)return;var db=i.scry(cb,'li.fbTimelineUnit'),eb={};for(var fb=0;fb<db.length;fb++){var gb=db[fb];if(gb.id&&aa(gb.id,'tl_unit_')){var hb=gb.id.substring(8,gb.id.length),ib=(gb.getAttribute('data-unit')=='ExperienceSummaryUnit'?gb.getAttribute('data-time'):1);if(eb.hasOwnProperty(hb)&&eb[hb]==ib){i.remove(gb);}else eb[hb]=ib;}}},removeLoadingState:function(bb){z(bb)&&h.removeClass(u(bb),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(bb,cb){var db=o.get(bb);db&&db.setExpandLoadData(cb);},updatePagerAfterLoad:function(bb,cb,db,eb,fb){if(!l.getInstance(bb.firstChild.id))na[bb.firstChild.id]=g.subscribe(l.REGISTERED,function(gb,hb){na[bb.firstChild.id].unsubscribe();delete na[bb.firstChild.id];if(hb.id===bb.firstChild.id)ab.updatePagerAfterLoad(bb,cb,db,eb,fb);});n.runOnceWhenSectionFullyLoaded(h.removeClass.curry(bb,'fbTimelineHiddenPager'),db,eb);if(fb)n.runOnceWhenSectionFullyLoaded(n.adjustScrollingPagerBuffer.curry(bb.firstChild.id,cb),db,eb);},showAfterLoad:function(bb,cb,db){n.runOnceWhenSectionFullyLoaded(function(){var eb=z(bb);eb&&h.show(eb);},cb,db);},repositionDialog:function(bb){g.subscribe(m.SECTION_LOADED,function(){bb.updatePosition();});}};e.exports=ab;});
__d("TimelineLogging",["TimelineController","reportData"],function(a,b,c,d,e,f){var g=b('TimelineController'),h=b('reportData'),i=false,j=0,k=null,l={init:function(m){if(i)return;j=m;g.register(g.LOGGING,this);},reset:function(){i=false;j=0;k=null;},log:function(m,n){n.profile_id=j;h(m,{gt:n});},logSectionChange:function(m,n){var o={timeline_section_change:1,key:m};if(k&&m==k){o.timeline_scrubber=1;k=null;}l.log('timeline',o);},logScrubberClick:function(m){k=m;}};e.exports=l;});
__d("legacy:TimelineCover",["TimelineCover"],function(a,b,c,d){a.TimelineCover=b('TimelineCover');},3);
__d("OnlyMeUI",["AudienceSelector","Arbiter","CSS","DOM","Parent","PrivacyConst","Selector","$","tx"],function(a,b,c,d,e,f){var g=b('AudienceSelector'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('PrivacyConst'),m=b('Selector'),n=b('$'),o=b('tx');function p(){return [j.create('div',{className:'onlyMeBorder'}),j.create('div',{className:'onlyMeBorder onlyMeBorderBottom'})];}function q(){return j.create('img',{alt:' ',className:'onlyMePrivacyCorner',height:34,src:'/images/profile/timeline/privacy_corner.png',width:34});}function r(x){var y=j.scry(x,'.photoUnit a.photo');return y.filter(function(z){return !j.scry(z,'.onlyMePrivacyCorner').length;});}function s(x,y){if(g.hasTags(u(y)))return;if(i.hasClass(x,'storyContent'))if(!k.byClass(x,'onlyMeWrap')){var z=j.create('div',{className:'onlyMeWrap'});j.appendContent(k.byClass(x,'uiStreamStory'),z);j.appendContent(z,x);x=z;}else x=k.byClass(x,'onlyMeWrap');i.addClass(x,'storyOnlyMe');if(!i.hasClass(x,'timelineRecentActivityStory'))j.setContent(j.find(y,'span.uiButtonText'),"Only Me");if(!i.hasClass(x,'storyContent')){var aa=r(x);for(var ba=0,ca=aa.length;ba<ca;++ba)j.appendContent(aa[ba],q());}if(!j.scry(x,'div.onlyMeBorder').length){var da=p();j.prependContent(x,da[0]);j.appendContent(x,da[1]);}}function t(x){if(!x)return;var y=k.byClass(x,'storyContent')||k.byClass(x,'timelineRecentActivityStory')||k.byClass(x,'timelineUnitContainer')||k.byClass(x,'fbTimelineTwoColumn');if(!y){y=j.scry(x,'^.permalink_stream .storyContent');y=y.length&&y[0];}else if(i.hasClass(y,'fbTimelineComposerUnit'))return null;return y;}function u(x){var y=j.scry(x,'*[data-oid]');if(y.length===0)return '';return y[0].getAttribute('data-oid');}var v=false,w={init:function(){if(v)return;v=true;h.subscribe('AudienceSelector/changed',function(x,y){var z=t(y.selector)||t(y.clone);if(!z)return;if(m.getOptionValue(y.option)==l.BaseValue.SELF){s(z,y.selector);}else{z=i.hasClass(z,'storyContent')?k.byClass(z,'onlyMeWrap'):z;z&&i.removeClass(z,'storyOnlyMe');}});},setOnlyMe:function(x){if(v)return;w.init();x=j.find(k.byClass(n(x),'uiSelector'),'a.uiSelectorButton');var y=t(x);y&&s(y,x);}};e.exports=w;});
__d("SubMenu",["event-extensions","Arbiter","copyProperties","CSS"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS');function j(){}h(j.prototype,{_subMenu:null,_mainMenu:null,_forward:null,_backward:null,init:function(k,l,m,n){this._subMenu=k;this._mainMenu=l;this._forward=m;this._backward=n;g.subscribe('SubMenu/Reset',this._goToMainMenu.bind(this));Event.listen(m,'click',this._goToSubMenu.bind(this));Event.listen(n,'click',this._goToMainMenu.bind(this));},initAsyncChildMenu:function(k){Event.listen(this._forward,'click',function(){this._goToSubMenu();k.load();}.bind(this));},_goToMainMenu:function(){i.hide(this._subMenu);i.show(this._mainMenu);},_goToSubMenu:function(){i.hide(this._mainMenu);i.show(this._subMenu);}});e.exports=j;});
__d("legacy:ui-submenu",["SubMenu"],function(a,b,c,d){a.SubMenu=b('SubMenu');},3);
__d("AsyncMenu",["AsyncRequest","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('copyProperties'),i=b('emptyFunction');function j(k,l){this._uri=k;this._elem=l;}h(j.prototype,{_uri:null,_elem:null,load:function(){this.load=i;g.bootstrap(this._uri,this._elem);}});e.exports=j;});
__d("TimelineViewportTracking",["event-extensions","Class","DOM","ViewportTracking","$","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Class'),h=b('DOM'),i=b('ViewportTracking'),j=b('$'),k=b('copyProperties'),l=55;function m(){this.parent.construct(this);}g.extend(m,i);k(m.prototype,{getDataFromConfig:function(n){this.timeout=n.record_delay;},getTimeout:function(){return this.timeout;},getAllStories:function(){return h.scry(j('timeline_tab_content'),'.timelineUnitContainer');},getStoryID:function(n){var o=JSON.parse(n.getAttribute('data-gt'));return o&&o.contentid;},getDataToLog:function(n){var o={evt:l,timelineviewporttracking:true};return {gt:o};}});e.exports.init=function(n){(new m()).init(n);};});
function TimelineCoverDisclaimer(a,b,c){if(TimelineCoverDisclaimer.displayed===undefined){TimelineCoverDisclaimer.displayed=true;}else return;new Dialog().setModal(true).setTitle(a).setBody(b).setButtonsMessage(c).setButtons(Dialog.OK).show();}
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('cx');function i(j){g.removeClass(j.element,"-cx-PRIVATE-fbTimelineBackdatedComposer__datepickerIconSelected");g.removeClass(j.element,"-cx-PRIVATE-fbComposerXTagger__controlOpen");}e.exports=i;});